<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å®æ—¶å­—ç¬¦è®¡æ•°å™¨</title>
  <link rel="stylesheet" href="./index.css">
</head>

<body>
  <div class="container">
    <h3>Live Character Counter</h3>
    <textarea placeholder="Write your text here..."></textarea>
    <p>Total Charactersï¼š<span class="count">0</span></p>
  </div>
  <script>
    const textarea = document.querySelector('textarea')
    const count = document.querySelector('.count')
    let cpLockFlag = true

    function countLetters() {
      if (!cpLockFlag) return false
      const text = textarea.value
      const textLength = textarea.value.length
      count.innerHTML = `${textLength}`
    }
    textarea.addEventListener('compositionstart', function() {
      console.log('ğŸš€ã€ä¸­æ–‡è¾“å…¥å¼€å§‹ã€‘', );
      cpLockFlag = false; //ä¸­æ–‡è¾“å…¥å¼€å§‹
    });
    textarea.addEventListener('compositionend', function() {
      console.log('ğŸš€ã€ä¸­æ–‡è¾“å…¥ç»“æŸã€‘', );
      cpLockFlag = true; //ä¸­æ–‡è¾“å…¥ç»“æŸ
      // compositionend äº‹ä»¶å‘ç”Ÿåœ¨ input ä¹‹åï¼Œæ•…æ­¤éœ€è¦æ­¤å¤„è°ƒç”¨ input ä¸­é€»è¾‘
      countLetters()
    });
    textarea.addEventListener('input', countLetters);
  </script>
</body>

</html>